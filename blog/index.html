<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title id="page-title">SwasthaIndia Blog</title>

  <!-- SEO -->
  <meta name="description" id="meta-description" content="Read health blogs, tips, and awareness articles from SwasthaIndia.">

  <!-- Open Graph / Social -->
  <meta property="og:title" id="og-title" content="SwasthaIndia Blog" />
  <meta property="og:description" id="og-desc" content="Stay informed with SwasthaIndia health blogs." />
  <meta property="og:image" id="og-image" content="https://example.com/default-thumbnail.jpg" />
  <meta property="og:url" id="og-url" content="" />
  <meta property="og:type" content="article" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="icon" type="image/x-icon" href="favicon.ico" />

  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
      color: #333;
    }
    header {
      background: #004d40;
      color: #fff;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      margin: 0;
      font-size: 1.5rem;
    }
    nav a {
      color: #fff;
      margin-left: 20px;
      text-decoration: none;
      font-weight: 500;
    }
    .container {
      max-width: 800px;
      margin: auto;
      padding: 2rem;
    }
    .blog-post img {
      max-width: 100%;
      height: auto;
      border-radius: 10px;
    }
    .blog-post h2 {
      font-size: 2rem;
      color: #00796b;
    }
    .blog-post .meta {
      color: #777;
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }
    .tags {
      margin-top: 1rem;
    }
    .tag {
      display: inline-block;
      background: #e0f2f1;
      color: #00796b;
      padding: 5px 10px;
      margin: 0 5px 5px 0;
      border-radius: 5px;
      font-size: 0.85rem;
    }
    .share-buttons a {
      margin-right: 10px;
      text-decoration: none;
      font-size: 1.2rem;
      color: #555;
    }
    footer {
      background: #004d40;
      color: #fff;
      padding: 2rem;
      text-align: center;
      margin-top: 3rem;
    }
    #comment-form {
      margin-top: 2rem;
    }
    #comment-form textarea {
      width: 100%;
      height: 100px;
      padding: 10px;
      font-size: 1rem;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    #comment-form button {
      background: #00796b;
      color: #fff;
      padding: 10px 20px;
      margin-top: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
.blog-post img {
  max-width: 100%;
  height: auto;
  border-radius: 10px;
  display: block;
}

.blog-post img:before {
  content: "Image not found";
  display: none;
}
.blog-tags {
  margin-top: 20px;
}

.tag {
  display: inline-block;
  background-color: #f0f8ff;
  color: #007BFF;
  padding: 6px 12px;
  margin: 4px;
  border-radius: 20px;
  font-size: 14px;
  cursor: pointer;
  transition: 0.2s ease;
}

.tag:hover {
  background-color: #d0e8ff;
}
.related-posts {
  margin-top: 40px;
  padding-top: 20px;
  border-top: 1px solid #ddd;
}

.related-posts h3 {
  margin-bottom: 20px;
  font-size: 24px;
  color: #333;
}

.related-posts-list {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
}

.related-card {
  width: 100%;
  max-width: 300px;
  background: #fff;
  border: 1px solid #eee;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  transition: transform 0.3s ease;
}

.related-card:hover {
  transform: translateY(-4px);
}

.related-card img {
  width: 100%;
  height: 160px;
  object-fit: cover;
}

.related-card h4 {
  padding: 10px;
  font-size: 18px;
  color: #222;
}

.related-card p {
  padding: 0 10px 10px;
  font-size: 14px;
  color: #777;
}

  </style>
</head>
<body>
  <body>
  <header>
    <h1>SwasthaIndia Blog</h1>
    <nav>
      <a href="/">Home</a>
      <a href="/packages">Packages</a>
      <a href="/contact">Contact</a>
    </nav>
  </header>

  <div class="container">
    <div id="blog-post" class="blog-post"></div>

    <div class="share-buttons">
      <p><strong>Share this article:</strong></p>
      <a id="whatsapp-share" href="#" target="_blank"><i class="fab fa-whatsapp"></i></a>
      <a id="facebook-share" href="#" target="_blank"><i class="fab fa-facebook"></i></a>
      <a id="twitter-share" href="#" target="_blank"><i class="fab fa-twitter"></i></a>
    </div>

    <!-- Comment form (rendered via JS) -->
  </div>

  <footer>
    <p>&copy; 2025 SwasthaIndia. All rights reserved.</p>
  </footer>

<script>
  async function loadBlogPost() {
    const urlParams = new URLSearchParams(window.location.search);
    const slug = urlParams.get("slug");
    const blogContainer = document.getElementById("blog-post");

    try {
      const response = await fetch("https://script.google.com/macros/s/AKfycbwX1UPxYVJxawevF9MjOqjSbgF7ED2ekklq576LUIfb-lN_wlwCtHZFfIYRG77Z0yc/exec");
      const data = await response.json();
const posts = data.blogs || data; // support both formats

      const post = posts.find(p => p.Slug === slug);

      if (!post) {
        blogContainer.innerHTML = "<p>Blog not found.</p>";
        return;
      }

      // ✅ Update SEO Meta Tags
      document.title = post.Title + " - SwasthaIndia Blog";
      document.getElementById("page-title").textContent = post.Title;
      document.getElementById("meta-description").setAttribute("content", post.Content.substring(0, 150));
      document.getElementById("og-title").setAttribute("content", post.Title);
      document.getElementById("og-desc").setAttribute("content", post.Content.substring(0, 150));
      document.getElementById("og-image").setAttribute("content", post["Image URL"]);
      document.getElementById("og-url").setAttribute("content", window.location.href);

      // ✅ Find related posts based on shared tags
      const related = posts.filter(p =>
        p.Slug !== slug &&
        p.Tags?.split(',').some(tag => post.Tags?.includes(tag))
      ).slice(0, 3);
function showRelatedPosts(allPosts, currentSlug, currentTags) {
  const related = allPosts.filter(p => {
    if (p.Slug === currentSlug) return false;
    const tags = p.Tags?.toLowerCase().split(",").map(tag => tag.trim());
    return tags?.some(tag => currentTags.includes(tag));
  }).slice(0, 3); // Show max 3 related posts

  const container = document.querySelector(".related-list");
  if (!container || related.length === 0) {
    document.getElementById("related-posts").style.display = "none";
    return;
  }

  related.forEach(post => {
    const card = document.createElement("div");
    card.className = "related-card";
    card.innerHTML = `
      <a href="blog.html?slug=${post.Slug}">
        <img src="${post["Image URL"]}" alt="${post.Title}" />
        <h4>${post.Title}</h4>
        <p>${post.Date}</p>
      </a>
    `;
    container.appendChild(card);
  });
}


      // ✅ Render main blog post content
      blogContainer.innerHTML = `
        <h2>${post.Title}</h2>
        <p class="meta">By ${post.Author} | ${post.Date}</p>
        <img src="${post["Image URL"]}" alt="${post.Title}" class="blog-image" />
        <div class="content">${post.Content}</div>

        <div class="tags">
          ${post.Tags.split(',').map(tag => `<span class="tag">${tag.trim()}</span>`).join('')}
        </div>

<hr>
<h3>Related Posts</h3>
<ul>
  ${related.map(r => `
    <li>
      <a href="?slug=${r.Slug}">${r.Title}</a> - <small>${r.Date}</small>
    </li>`).join('')
  }
</ul>
        <hr>
        <h3>Leave a Comment</h3>
        <form id="comment-form">
          <textarea id="comment" rows="3" placeholder="Your comment here..." required></textarea><br>
          <button type="submit">Submit</button>
        </form>

        <p><a href="/blogs" style="color:#00796b; font-weight:bold;">&larr; Back to all blogs</a></p>
      `;
const currentTags = post.Tags?.toLowerCase().split(",").map(tag => tag.trim());
showRelatedPosts(posts, slug, currentTags);


      // ✅ Set share links
      document.getElementById("whatsapp-share").href = `https://wa.me/?text=${encodeURIComponent(document.title + ' - ' + window.location.href)}`;
      document.getElementById("facebook-share").href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`;
      document.getElementById("twitter-share").href = `https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(post.Title)}`;

    } catch (err) {
      blogContainer.innerHTML = "<p>Failed to load blog post.</p>";
    }
  }

  // ✅ Handle comment form submission
  document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("comment-form")?.addEventListener("submit", function (e) {
      e.preventDefault();
      const comment = document.getElementById("comment").value;
      alert("Thank you for your feedback! (Comment saved locally)");
      document.getElementById("comment").value = "";
    });

    loadBlogPost();
  });
</script>

</body>
</html>
