<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title id="page-title">SwasthaIndia Blog</title>

  <!-- Dynamic meta tags (JS will update these) -->
  <meta name="description" id="meta-description" content="Stay informed with SwasthaIndia health blogs." />
  <link rel="canonical" id="canonical-url" href="https://swasthaindia.in/blogs/" />
  <meta name="robots" content="index, follow">

  <!-- Open Graph (dynamic placeholders) -->
  <meta property="og:type" content="article" />
  <meta property="og:title" id="og-title" content="SwasthaIndia Blog" />
  <meta property="og:description" id="og-desc" content="Stay informed with SwasthaIndia health blogs." />
  <meta property="og:url" id="og-url" content="https://swasthaindia.in/blogs/" />
  <meta property="og:image" id="og-image" content="https://swasthaindia.in/blog-images/default-blog-hero.jpg" />
  <meta property="og:site_name" content="SwasthaIndia" />

  <!-- Twitter (dynamic placeholders) -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" id="twitter-title" content="SwasthaIndia Blog">
  <meta name="twitter:description" id="twitter-desc" content="Stay informed with SwasthaIndia health blogs.">
  <meta name="twitter:image" id="twitter-image" content="https://swasthaindia.in/blog-images/default-blog-hero.jpg">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WJ1DMWRWC3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-WJ1DMWRWC3');
  </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">
    
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />

    <style>
        /* --- Global Styles & Variables --- */
:root {
    --primary-color: #007c91;
    --secondary-color: #00bfa5;
    --accent-color: #004d40;
    --dark-color: #1a1a1a;
    --text-color: #333;
    --light-bg: #f5f9fc;
    --card-bg: #ffffff;
    --border-radius: 12px;
    --box-shadow: 0 4px 15px rgba(0,0,0,0.08);
}

* {
    box-sizing: border-box;
}

body {
    font-family: 'Inter', sans-serif;
    margin: 0;
    padding: 0;
    background: var(--light-bg);
    color: var(--text-color);
}

body.no-scroll {
    overflow: hidden;
}

/* --- Header & Navigation --- */
.header {
    background: var(--card-bg);
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000;
}

.topbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 20px;
    height: 60px;
}

.logo img {
    height: 40px; 
}

.nav-links {
    display: flex;
    align-items: center;
}

.nav-links a {
    text-decoration: none;
    color: var(--primary-color);
    font-weight: 600;
    font-size: 16px;
    margin-left: 24px;
    transition: color 0.3s;
}

.nav-links a:hover {
    color: var(--secondary-color);
}

.nav-links .active {
    border-bottom: 2px solid var(--secondary-color);
}

.hamburger {
    display: none;
    cursor: pointer;
    font-size: 24px;
    color: var(--primary-color);
    background: none;
    border: none;
    padding: 0;
}

/* --- Main Content --- */
.container {
    max-width: 1100px;
    margin: 60px auto 0;
    padding: 2rem;
}

.hero-banner {
    background: linear-gradient(90deg, #0f2027, #203a43, #2c5364);
    padding: 80px 20px;
    text-align: center;
    color: white;
    border-radius: var(--border-radius);
    margin-bottom: 40px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}

.hero-banner h1 {
    font-size: 3rem;
    margin-bottom: 10px;
    font-weight: 700;
}

.hero-banner p {
    font-size: 1.2rem;
    font-weight: 400;
    max-width: 600px;
    margin: 0 auto;
}

.search-filter-container {
    margin-bottom: 40px;
    text-align: center;
}

#searchInput {
    width: 100%;
    max-width: 600px;
    padding: 12px 20px;
    border: 1px solid #ccc;
    border-radius: 25px;
    font-size: 16px;
    transition: box-shadow 0.3s;
}

#searchInput:focus {
    outline: none;
    box-shadow: 0 0 8px rgba(0, 124, 145, 0.2);
}

.tags-container {
    margin-top: 20px;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
}

.tag {
    display: inline-block;
    background: #e0f2f1;
    color: var(--accent-color);
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 14px;
    cursor: pointer;
    transition: background 0.3s, transform 0.2s;
}

.tag:hover {
    background: #b2dfdb;
    transform: translateY(-2px);
}

.blog-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
}

.loading-message, .no-results-message {
    text-align: center;
    font-size: 1.2rem;
    color: #555;
    grid-column: 1 / -1; /* Center the message in the grid */
}

.blog-card {
    background: var(--card-bg);
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    text-decoration: none;
    color: inherit;
    display: flex;
    flex-direction: column;
}

.blog-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
}

.blog-card img {
    width: 100%;
    height: 220px;
    object-fit: cover;
    border-bottom: 1px solid #eee;
}

.blog-card-content {
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
}

.blog-card .meta {
    font-size: 0.85rem;
    color: #888;
    margin-bottom: 0.5rem;
}

.blog-card h3 {
    margin: 0 0 10px;
    color: var(--accent-color);
    font-size: 1.5rem;
    line-height: 1.3;
}

.blog-card p {
    font-size: 1rem;
    color: #555;
    line-height: 1.5;
    margin-bottom: 20px;
}

.read-more {
    margin-top: auto; /* Pushes the button to the bottom */
    display: inline-block;
    background: var(--primary-color);
    color: white;
    padding: 10px 20px;
    border-radius: 5px;
    text-decoration: none;
    font-weight: 600;
    transition: background-color 0.3s;
    align-self: flex-start;
}

.read-more:hover {
    background: var(--secondary-color);
}

/* --- Footer Styles --- */
.swastha-footer {
    background: linear-gradient(to right, #000000, var(--dark-color));
    color: #fff;
    padding: 50px 20px 20px;
    font-family: 'Inter', sans-serif;
    margin-top: 60px;
}

.footer-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    max-width: 1200px;
    margin: auto;
}

.footer-column {
    flex: 1 1 300px;
    margin: 20px;
}

.footer-column h3, .footer-column h4 {
    color: var(--secondary-color);
    margin-bottom: 15px;
}

.footer-column p, .footer-column a {
    color: #ccc;
    font-size: 15px;
    line-height: 1.6;
    text-decoration: none;
}

.footer-column a:hover {
    color: #00ffd5;
    transition: 0.3s;
}

.footer-column ul {
    list-style: none;
    padding: 0;
}

.footer-column ul li {
    margin-bottom: 10px;
}

.social-icons a {
    font-size: 20px;
    color: #ccc;
    margin-right: 15px;
    transition: transform 0.3s, color 0.3s;
}

.social-icons a:hover {
    transform: scale(1.2);
    color: #00ffd5;
}

.footer-bottom {
    text-align: center;
    margin-top: 30px;
    padding-top: 15px;
    border-top: 1px solid #333;
    color: #999;
    font-size: 14px;
}

/* --- Media Queries for Mobile --- */
@media (max-width: 768px) {
    .logo img { height: 35px; }

    .nav-links {
        display: none;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.95);
        backdrop-filter: blur(5px);
        z-index: 999;
        transition: all 0.4s ease-in-out;
    }
    
    .nav-links.active {
        display: flex;
    }
    
    .nav-links a {
        color: white;
        font-size: 2rem;
        margin: 20px 0;
    }
    
    .hamburger {
        display: block;
        z-index: 1001; /* Ensure hamburger is above the overlay */
    }

    .hero-banner {
        padding: 60px 10px;
    }
    
    .hero-banner h1 {
        font-size: 2rem;
    }

    .container {
        padding: 1rem;
    }

    .footer-container {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }
    
    .read-more {
        align-self: center;
    }
}
/* Basic styling for the blog post cards */
.blog-post {
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 20px;
  background-color: #fff;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Skeleton-specific styling */
.skeleton {
  position: relative;
  overflow: hidden;
  background-color: #f0f0f0;
}

.skeleton-image {
  width: 100%;
  height: 200px;
  background-color: #e0e0e0;
  border-radius: 4px;
}

.skeleton-content {
  padding-top: 16px;
}

.skeleton-text {
  background-color: #e0e0e0;
  height: 1em;
  border-radius: 4px;
  margin-bottom: 8px;
}

.skeleton-heading {
  width: 70%;
  height: 1.5em;
}

.skeleton-line {
  width: 100%;
}

.skeleton-line:last-child {
  width: 85%;
}

/* The shimmer animation */
.skeleton::after {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  transform: translateX(-100%);
  background-image: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0) 0,
    rgba(255, 255, 255, 0.2) 20%,
    rgba(255, 255, 255, 0.5) 60%,
    rgba(255, 255, 255, 0)
  );
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  100% {
    transform: translateX(100%);
  }
}
    </style>
</head>
<body>
    <header class="header">
        <div class="topbar">
            <a href="/" class="logo">
                <img src="/logo.png" alt="SwasthaIndia Logo" />
            </a>
            <button class="hamburger" id="hamburger" aria-label="Open navigation menu">
                <i class="fas fa-bars"></i>
            </button>
            <nav class="nav-links" id="navLinks">
                <a href="/">Home</a>
                <a href="/my-packages/">Packages</a>
                <a href="/book-test/">Book Test</a>
                <a href="/contact/">Contact</a>
                <a href="/about/">About</a>
                <a href="/blogs/" class="active">Blog</a>
            </nav>
        </div>
    </header>

    <main class="container">
        <section class="hero-banner">
            <h1>Our Health Blog</h1>
            <p>Your one-stop destination for trusted health tips, insights, and medical news from our experts.</p>
        </section>
        
        <section class="search-filter-container">
            <input type="text" id="searchInput" placeholder="Search blog posts..." aria-label="Search blog posts" />
            <div id="tags-container" class="tags-container"></div>
        </section>
<div id="blog-list-container" class="blog-list">
            <p style="text-align: center; font-size: 1.2rem; color: #555;">Loading blog posts...</p>
        </div>
    </div>

        <div class="blog-post-container" id="blog-posts" style="display: none;">
  </div>

<template id="skeleton-template">
  <div class="blog-post skeleton">
    <div class="skeleton-image"></div>
    <div class="skeleton-content">
      <div class="skeleton-text skeleton-heading"></div>
      <div class="skeleton-text skeleton-line"></div>
      <div class="skeleton-text skeleton-line"></div>
      <div class="skeleton-text skeleton-line"></div>
    </div>
  </div>
</template>
    </main>

    <footer class="swastha-footer">
        <div class="footer-container">
            <div class="footer-column about">
                <h3>SwasthaIndia</h3>
                <p>Where Healing Meets Innovation. Your trusted platform for reliable blood tests and health packages.</p>
            </div>
            <div class="footer-column links">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/book-test/">Book Test</a></li>
                    <li><a href="/my-packages/">Health Packages</a></li>
                    <li><a href="/privacy/">Privacy Policy</a></li>
                    <li><a href="/blogs/">Blog</a></li>
                    <li><a href="/contact/">Contact Us</a></li>
                </ul>
            </div>
            <div class="footer-column contact">
                <h4>Contact</h4>
                <p>Email: <a href="mailto:info@swasthaindia.in">info@swasthaindia.in</a></p>
                <p>Phone: <a href="tel:+919911990556">+91 99119 90556</a></p>
                <div class="social-icons">
                    <a href="https://wa.me/919911990556" target="_blank" title="WhatsApp" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    <a href="https://www.instagram.com/swasthaindia/" target="_blank" title="Follow us on Instagram" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="https://www.facebook.com/profile.php?id=100070218915961" target="_blank" rel="noopener noreferrer" title="Follow us on Facebook" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                    <a href="https://www.linkedin.com" target="_blank" title="LinkedIn" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>© 2025 SwasthaIndia. All rights reserved.</p>
        </div>
    </footer>

    <script src="script.js" defer></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
    // Mobile navigation functionality
    const hamburger = document.getElementById('hamburger');
    const navLinks = document.getElementById('navLinks');
    const body = document.body;

    if (hamburger && navLinks) {
        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            body.classList.toggle('no-scroll');
        });
        navLinks.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                if (navLinks.classList.contains('active')) {
                    navLinks.classList.remove('active');
                    body.classList.remove('no-scroll');
                }
            });
        });
    }

    let allPosts = [];
    const blogListContainer = document.getElementById("blog-list-container");
    const searchInput = document.getElementById("searchInput");
    const tagsContainer = document.getElementById('tags-container');

    // Function to create and show skeletons
    function showSkeletons() {
        blogListContainer.innerHTML = '';
        const numberOfSkeletons = 6; // Display 6 skeleton cards
        for (let i = 0; i < numberOfSkeletons; i++) {
            const skeletonCard = document.createElement("div");
            skeletonCard.className = "blog-card skeleton";
            skeletonCard.innerHTML = `
                <div class="skeleton-image"></div>
                <div class="blog-card-content">
                    <div class="skeleton-text meta"></div>
                    <div class="skeleton-text title"></div>
                    <div class="skeleton-text paragraph"></div>
                    <div class="skeleton-text button"></div>
                </div>
            `;
            blogListContainer.appendChild(skeletonCard);
        }
    }

    // Function to hide skeletons and show actual posts
    function hideSkeletonsAndRenderPosts(postsToRender) {
        blogListContainer.innerHTML = "";
        renderPosts(postsToRender);
    }
    
    // Function to fetch blog posts from the API
    async function fetchAllBlogPosts() {
        showSkeletons();
        const apiUrl = "/blog-api";

        try {
            const response = await fetch(apiUrl);
            
            if (!response.ok) {
                console.error("Network response was not ok:", response.status, response.statusText);
                blogListContainer.innerHTML = `<p class="no-results-message">Error: Could not retrieve data. Status: ${response.status}</p>`;
                return;
            }

            const data = await response.json();
            allPosts = data.blogs || data;

            if (!allPosts || !Array.isArray(allPosts) || allPosts.length === 0) {
                blogListContainer.innerHTML = `<p class="no-results-message">No blog posts found.</p>`;
                return;
            }

            allPosts.sort((a, b) => new Date(b.Date) - new Date(a.Date));
            
            hideSkeletonsAndRenderPosts(allPosts);
            renderTags(allPosts);

        } catch (err) {
            console.error("Failed to load blog posts:", err);
            blogListContainer.innerHTML = `<p class="no-results-message">Failed to load blog posts. Please try again later.</p>`;
        }
    }

    // Function to render blog posts to the DOM
    function renderPosts(postsToRender) {
        if (postsToRender.length === 0) {
            blogListContainer.innerHTML = `<p class="no-results-message">No matching blog posts found.</p>`;
            return;
        }

        postsToRender.forEach(post => {
    const postCard = document.createElement("a");
    postCard.className = "blog-card";
    // ✅ Updated to static HTML blog link
    postCard.href = `/blog/${post.Slug}.html`;  
    
    const excerpt = post.Content.split("</p>")[0].replace(/<[^>]*>/g, '').substring(0, 150) + '...';

    postCard.innerHTML = `
        <img src="${post["Image URL"]}" alt="${post.Title}" loading="lazy" />
        <div class="blog-card-content">
            <p class="meta">By ${post.Author} | ${post.Date}</p>
            <h3>${post.Title}</h3>
            <p>${excerpt}</p>
            <span class="read-more">Read More &rarr;</span>
        </div>
    `;

    document.querySelector(".blog-list").appendChild(postCard);
});

    
    // Function to render tags for filtering
    function renderTags(posts) {
        const allTags = new Set();
        posts.forEach(post => {
            if (post.Tags) {
                post.Tags.split(',').map(tag => tag.trim()).forEach(tag => {
                    if (tag) allTags.add(tag);
                });
            }
        });

        tagsContainer.innerHTML = '';
        allTags.forEach(tag => {
            const tagSpan = document.createElement('span');
            tagSpan.className = 'tag';
            tagSpan.textContent = tag;
            tagSpan.onclick = () => filterByTag(tag);
            tagsContainer.appendChild(tagSpan);
        });
    }
    
    // Filter posts by a selected tag
    function filterByTag(selectedTag) {
        searchInput.value = ''; // Clear search input on tag click
        const filteredPosts = allPosts.filter(post => post.Tags && post.Tags.includes(selectedTag));
        renderPosts(filteredPosts);
    }

    // Event listener for search input
    searchInput.addEventListener('input', (e) => {
        const searchTerm = e.target.value.toLowerCase();
        const filteredPosts = allPosts.filter(post => 
            post.Title.toLowerCase().includes(searchTerm) || 
            post.Content.toLowerCase().includes(searchTerm) || 
            (post.Tags && post.Tags.toLowerCase().includes(searchTerm))
        );
        renderPosts(filteredPosts);
    });

    // Initial call to fetch and display blog posts
    fetchAllBlogPosts();
});
</script>
</body>
</html>
